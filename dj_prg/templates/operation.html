{% extends 'base.html' %}

{% load static %}

{% block title %}Операции с Базой данных{% endblock %}

{% block form %}

<div class="container">
    <div class="row">
        <div class="col gy-5">
            <form action="" method="POST">
                {% csrf_token %} <!-- Защита формы -->
                <table>{{ form }}</table> <!-- Поля ввода -->
                <input class="btn btn-light" type="submit" value="Сохранить"> <!-- Кнопка ввода -->
                <a class="btn btn-light" href="/create">Создать пользователя</a> <!-- -->
            </form>
            {% if request.method == "POST" %}
            {% if name %}
            <p>Пользователь: <b><i>{{ name }}</i></b> добавлен в базу данных!</p>
            {% else %}
            <p>Вы не можете создать пользователя, не заполнив поля в таблице!!!</p>
            {% endif %}
            {% endif %}
        </div>

        <div class="col-6 text-center">
            <table class="table">
                <thead>
                <tr>
                    <th scope="col">ID</th>
                    <th scope="col">Имя</th>
                    <th scope="col">Возраст</th>
                    <th scope="col">Изменить?</th>
                </tr>
                </thead>
                <tbody>
                {% for elem in data %}
                <tr>
                    <td>{{ elem.id }}</td>
                    <td>{{ elem.name }}</td>
                    <td>{{ elem.age }}</td>
                    <td><a class="btn btn-danger" href="delete/{{ elem.id }}" name="delete">Удалить?</a> | <a
                            class="btn btn-success" href="edit/{{ elem.id }}">Изменить?</a></td>
                </tr>
                {% endfor %}

                </tbody>
            </table>
        </div>
    </div>
</div>

{% endblock %}
